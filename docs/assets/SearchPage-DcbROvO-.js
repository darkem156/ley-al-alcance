import{c as h,r as l,j as e,L as $,S as q,M}from"./index-CWY4SZHm.js";import{V as H,a as P}from"./volume-x-V4OpA3Q0.js";import{M as j}from"./index-CBHi1vF_.js";import{A as V}from"./arrow-right-CswNkMTv.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Q=h("mic-off",I);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],U=h("mic",D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],O=h("scale",B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Z=h("sparkles",T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=h("x",W);function G({law:t}){const[o,i]=l.useState(!1);console.log("Rendering LawCard for law:",t);const x=()=>{if(o){window.speechSynthesis.cancel(),i(!1);return}if("speechSynthesis"in window){const a=new SpeechSynthesisUtterance(t.resumen);a.lang="es-ES",a.rate=.9,a.onstart=()=>i(!0),a.onend=()=>i(!1),a.onerror=()=>i(!1),window.speechSynthesis.speak(a)}else alert("Lo siento, tu navegador no soporta síntesis de voz.")};return e.jsx("div",{className:"bg-white rounded-xl p-6 border border-slate-200 hover:border-blue-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"text-slate-900 flex-1",children:t.titulo}),e.jsx("button",{onClick:x,className:`flex-shrink-0 p-2 rounded-lg transition-colors ${o?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:o?"Detener lectura":"Escuchar resumen",children:o?e.jsx(H,{className:"w-4 h-4"}):e.jsx(P,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-slate-600 mb-4 max-h-[150px] overflow-y-auto",children:e.jsx(j,{children:t.resumen})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tema.map((a,m)=>e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:a.tema},m))})]}),e.jsxs($,{to:`/laws/${t.id}`,className:"flex-shrink-0 flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx("span",{children:"Ver detalles"}),e.jsx(V,{className:"w-4 h-4"})]})]})})}function se(){const[t,o]=l.useState(new URLSearchParams(window.location.search).get("q")||""),[i,x]=l.useState(!1),[a,m]=l.useState([]),[w,L]=l.useState(!1),[p,d]=l.useState(!1),[c,v]=l.useState([]),[g,y]=l.useState(""),[N,k]=l.useState(!1),n=l.useRef(null);l.useEffect(()=>{window.history.replaceState(null,"",`?q=${encodeURIComponent(t)}`)},[t]),l.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const s=window.webkitSpeechRecognition||window.SpeechRecognition;n.current=new s,n.current.continuous=!1,n.current.interimResults=!1,n.current.lang="es-ES",n.current.onresult=r=>{const b=r.results[0][0].transcript;o(b),d(!1)},n.current.onerror=()=>d(!1),n.current.onend=()=>d(!1)}t.trim()!==""&&u()},[]);const u=async(s=null,r=null,b=!1)=>{x(!0);const f=s||t;if(!f.trim())return;if(console.log("Performing search for:",f),r){const _={role:"user",content:r},A=[...c,_];v(A)}const z="https://ley-al-alcance.duckdns.org/api/leyes/semantic/",E=r?[...c,{role:"user",content:r}]:c,S=await(await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({q:f,h:b?[]:E})})).json();m(S.resultados||[]),v(S.historial_mensajes||[]),L(!0),x(!1)},C=()=>{if(!n.current){alert("Lo siento, tu navegador no soporta búsqueda por voz.");return}p?(n.current.stop(),d(!1)):(n.current.start(),d(!0))},R=["¿Cómo abrir un negocio?","¿Qué es la violencia digital?","¿Cuáles son mis derechos laborales?","¿Cómo denunciar violencia doméstica?"];return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mx-auto text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full mb-6",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Búsqueda Semántica con IA"})]}),e.jsx("h1",{className:"text-slate-900 mb-4",children:"Encuentra Leyes en Lenguaje Sencillo"}),e.jsx("p",{className:"text-slate-600",children:"Haz preguntas de forma natural - no se requiere experiencia legal"})]}),e.jsxs("div",{className:"mb-8 relative",children:[e.jsx("input",{type:"text",value:t,onChange:s=>o(s.target.value),onKeyDown:s=>s.key==="Enter"&&u(),placeholder:"Ej: ¿Cómo abrir un negocio? ¿Qué es la violencia digital?",className:"w-full px-6 py-4 pr-28 rounded-xl border-2 border-slate-200 focus:border-blue-500 focus:outline-none transition-colors shadow-sm"}),e.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-2",children:[e.jsx("button",{onClick:C,className:`p-3 rounded-lg transition-colors ${p?"bg-red-600 animate-pulse text-white":"bg-slate-600 text-white"}`,children:p?e.jsx(Q,{}):e.jsx(U,{})}),e.jsx("button",{onClick:()=>u(null,null,!0),className:"bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700",children:e.jsx(q,{})})]}),e.jsx("button",{onClick:()=>k(!N),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition",children:e.jsx(M,{size:28})})]}),N&&e.jsxs("div",{className:"fixed bottom-0 right-0 w-full md:w-[480px] h-[85vh] md:h-[90vh] bg-white shadow-2xl border border-slate-300 z-50 rounded-t-2xl md:rounded-xl flex flex-col",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 rounded-t-2xl md:rounded-t-xl flex items-center gap-3 shadow",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:e.jsx(M,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Asistente Legal IA"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Haz preguntas en lenguaje sencillo"})]}),e.jsx("button",{onClick:()=>k(!1),className:"text-white cursor-pointer flex-1 flex justify-right",children:e.jsx(X,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4 bg-slate-50",children:c.length>2?c.slice(2).map((s,r)=>e.jsx("div",{className:`max-w-[80%] p-3 rounded-xl shadow-sm ${s.role==="user"?"ml-auto bg-blue-100 text-slate-900":"bg-white border border-slate-200"}`,children:e.jsx(j,{children:s.content})},r)):e.jsx("div",{className:"bg-white border max-w-[80%] p-4 rounded-xl shadow",children:e.jsx("p",{className:"text-slate-700 text-sm",children:"¡Hola! Soy tu asistente legal. Pregúntame cualquier cosa sobre leyes en lenguaje sencillo. Por ejemplo, puedes preguntar sobre cómo iniciar un negocio, tus derechos laborales o cómo denunciar un problema."})})}),e.jsxs("div",{className:"p-4 border-t bg-white flex items-center gap-3",children:[e.jsx("input",{type:"text",value:g,onChange:s=>y(s.target.value),placeholder:"Pregunta sobre leyes, derechos o procedimientos...",className:"flex-1 px-4 py-3 border rounded-full bg-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{onClick:()=>{g.trim()!==""&&(u(null,g),y(""))},className:"px-5 py-3 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M12 5l7 7-7 7"})}),e.jsx("span",{className:"hidden md:block",children:"Enviar"})]})]})]}),e.jsxs("div",{className:"mx-auto",children:[!w&&e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Búsquedas sugeridas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map((s,r)=>e.jsx("button",{onClick:()=>{o(s),u(s)},className:"px-4 py-2 bg-white border border-slate-200 rounded-full hover:bg-blue-50",children:s},r))})]}),i&&e.jsxs("div",{className:"flex gap-1 my-3",children:[e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),w&&e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-slate-50 rounded-xl p-6 mb-8 border border-blue-100",children:e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"bg-blue-600 p-3 rounded-lg",children:e.jsx(O,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-slate-900 mb-2",children:"Marco Legal General"}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:e.jsx(j,{children:c[1].content})})]})]})}),e.jsxs("p",{className:"text-slate-600 mb-4",children:[a.length," ",a.length===1?"ley encontrada":"leyes encontradas"]}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsx(G,{law:s},s.id))})]})]})]})}export{se as default};
