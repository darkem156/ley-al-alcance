import{c as d,r as n,u as h,a as p,j as e,B as u,L as b}from"./index-Den3X4Jz.js";import{V as j,a as w}from"./volume-x-BDQ-5_yY.js";import{M as g}from"./index-7JsrFTuE.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],f=d("arrow-left",N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],y=d("link",v);function D(){const[t,l]=n.useState(!1),{id:r}=h(),c=p(),[a,x]=n.useState(null),m=()=>{if(t){window.speechSynthesis.cancel(),l(!1);return}if("speechSynthesis"in window){console.log("Speaking law resumen:",a.ley.resumen);const s=new SpeechSynthesisUtterance(a.ley.resumen);s.lang="es-ES",s.rate=.9,s.onstart=()=>l(!0),s.onend=()=>l(!1),s.onerror=()=>l(!1),window.speechSynthesis.speak(s)}else alert("Lo siento, tu navegador no soporta síntesis de voz.")};return n.useEffect(()=>{async function s(){const i=await(await fetch(`http://ley-al-alcance.duckdns.org/api/leyes/ley?pk=${r}`)).json();x(i),console.log("Fetched law details:",i)}s()},[r]),a?e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>c(-1),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6",children:[e.jsx(f,{className:"w-4 h-4"}),"Volver a la búsqueda"]}),e.jsx("div",{className:"bg-white rounded-xl p-8 border border-slate-200 shadow-sm mb-6",children:e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(u,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-slate-900 mb-3",children:a.ley.titulo}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-4 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Resumen en Lenguaje Sencillo"}),e.jsx("button",{onClick:m,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition-colors text-sm ${t?"bg-blue-600 text-white":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-300"}`,title:t?"Detener lectura":"Escuchar resumen",children:t?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Detener"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Escuchar"})]})})]}),e.jsx("div",{className:"text-slate-700 max-h-[250px] overflow-y-auto",children:e.jsx(g,{children:a.ley.resumen})})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-8 border border-slate-200 shadow-sm mb-6",children:[e.jsx("h2",{className:"text-slate-900 mb-6",children:"Documento original"}),e.jsx("div",{className:"space-y-6",children:e.jsx("embed",{className:"w-full min-h-[800px]",src:a.ley.historial.sort((s,o)=>new Date(s.fecha_ppo)-new Date(o.fecha_ppo)).reverse()[0].rutaArchivo,type:"application/pdf"})})]}),e.jsx("div",{className:"gap-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(y,{className:"w-5 h-5 text-slate-600"}),e.jsx("h3",{className:"text-slate-900",children:"Leyes Relacionadas"})]}),e.jsx("div",{className:"space-y-3 flex flex-col",children:a.relacionadas.map(s=>e.jsx(b,{to:`/laws/${s.id}`,className:"p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",children:s.titulo},s.id))})]})})]}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-600",children:"Ley no encontrada"}),e.jsx("button",{onClick:()=>c(-1),className:"mt-4 text-blue-600 hover:text-blue-700",children:"Volver a la búsqueda"})]})})}export{D as default};
